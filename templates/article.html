<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ article.title }} -- blog</title>
</head>
<body>
<h1 class="markdown-text"># {{ article.title }}</h1>
<p>作者： {{ article.user_id }}访问量：{{ article.views }}</p>
<div class="content">
    <div class="markdown-text">{{ article.content }}</div>
</div>
<link rel="stylesheet" href="/static/bootstrap.min.css">
<script src="/static/marked.min.js"></script>
<link rel="stylesheet" href="/static/prism.css">
<script src="/static/prism.js"></script>
<script>
    var markContents = function () {
        // markdown -> html 的处理放在高亮前面
        // 因为高亮是针对 html 格式的
        var contentDivs = document.querySelectorAll('.markdown-text')
        for (var i = 0; i < contentDivs.length; i++) {
            var contentDiv = contentDivs[i]
            var content = marked(contentDiv.textContent)
            contentDiv.innerHTML = content
        }
    }

    var highlight = function () {
        // 自动加载对应的语言 不然要手动加入各个语言的 js
        Prism.plugins.autoloader.languages_path = 'https://cdn.bootcss.com/prism/1.13.0/components/'
    }

    var __main = function () {
        markContents()
        highlight()
    }

    __main()

</script>
</body>

</html>
